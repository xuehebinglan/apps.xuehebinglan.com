webpackJsonp([1],{"0CsH":function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("7+uW"),n={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var i=a("VU/8")({name:"App"},n,!1,function(t){a("0CsH")},null,null).exports,r=a("/ocq"),o={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"home-page-container"},[e("h1",[this._v("\n    My Apps\n  ")]),this._v("\n  this is homepage.\n")])}]};var c=a("VU/8")({name:"HomePage",data:function(){return{msg:"Welcome to Your Vue.js App"}}},o,!1,function(t){a("fg9c")},"data-v-dbdbdd30",null).exports,l={GetToday:function(){var t=new Date,e=t.getFullYear(),a=t.getMonth(),s=t.getDate();return{CNtoday:e+"年"+this.addFirstZeroForDate(a+1)+"月"+this.addFirstZeroForDate(s)+"日",date:""+e+this.addFirstZeroForDate(a+1)+this.addFirstZeroForDate(s),year:e,month:a,day:s}},addFirstZeroForDate:function(t){return t<10?"0"+t:t+""}},u="http://api.xuehebinglan.com/drinkwater",d={name:"DrinkWater",data:function(){return{title:"You need drink WATER!",today:{},cupCapacity:100,userName:"",totalDrinkWater:0,totalCupNumber:0,centerDialogVisible:!1,firstType:!1,alertNewUser:!1,loading:!1,isSetUserName:!0}},computed:{reachStandard:function(){return this.totalDrinkWater>=2e3}},created:function(){this.today=l.GetToday()},methods:{handleUserNameClose:function(){this.userName?(this.handleChangeName(),this.isSetUserName=!1):this.$alert("请输入用户名","警告",{confirmButtonText:"确定",center:!0})},handleChangeName:function(){var t=this;console.log("change userName"),this.loading=!0,this.$axios.get(u+"/getdata",{params:{username:this.userName,date:"d"+this.today.date}}).then(function(e){if(t.loading=!1,console.log("get name data",e),e.data.data){var a=e.data.data;t.cupCapacity=a.cup_capacity,t.userName=a.user_name,t.totalDrinkWater=a.total_drink_water,t.totalCupNumber=a.total_cup_number}else 1===parseInt(e.data.errno)?t.firstType="firstUser":t.firstType="firstDate"})},handleChangeCupCapacity:function(){console.log("change cupCapacity"),console.log(this.cupCapacity)},addOneCupWater:function(){this.firstType?this.createNewUser():this.setUserData("add")},subOneCupWater:function(){this.firstType?this.createNewUser():0===this.totalCupNumber?this.$alert("不能更少了哦","警告",{confirmButtonText:"确定"}):this.setUserData("sub")},setUserData:function(t){var e=this;this.$axios.get(u+"/setdata",{params:{username:this.userName,date:"d"+this.today.date,cup_capacity:this.cupCapacity,operation_type:t}}).then(function(a){console.log("setUserData"),console.log(a),"add"===t?(e.totalDrinkWater+=e.cupCapacity,e.totalCupNumber+=1):"sub"===t&&(console.log("sub"),e.totalDrinkWater=a.data["d"+e.today.date].total_drink_water,e.cupCapacity=a.data["d"+e.today.date].cup_capacity,e.totalCupNumber-=1)})},createNewUser:function(){var t=this,e="firstUser"===this.firstType?"当前为新用户，是否创建？":"当前为用户今天的新数据，是否创建？";this.$confirm(e,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0,showClose:!1}).then(function(){t.$message({type:"success",message:"创建成功"}),t.$axios.get(u+"/initdata",{params:{username:t.userName,date:"d"+t.today.date,cup_capacity:t.cupCapacity}}).then(function(e){t.firstType=!1,t.totalDrinkWater+=t.cupCapacity,t.totalCupNumber+=1})}).catch(function(){t.$message({type:"info",message:"已取消创建"})})}}},p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"drink-water-container"},[a("h1",[t._v("\n    "+t._s(t.title)+"\n  ")]),t._v(" "),t._m(0),t._v(" "),a("p",[t._v("从现在开始记录你每天的喝水数量吧！看看达没达标！")]),t._v(" "),a("div",{staticClass:"drink-water-user-name content-line"},[a("span",[t._v("用户名：")]),t._v(" "),a("span",{staticClass:"underline"},[t._v(t._s(t.userName))])]),t._v(" "),a("div",{staticClass:"drink-water-cup-capacity content-line"},[a("span",[t._v("设置你的每杯水的容量：")]),t._v(" "),a("el-input-number",{staticClass:"cup-capacity-number",attrs:{min:1,max:2e3,step:10,size:"mini"},on:{change:t.handleChangeCupCapacity},model:{value:t.cupCapacity,callback:function(e){t.cupCapacity=e},expression:"cupCapacity"}}),t._v(" "),a("span",[t._v("ML")])],1),t._v(" "),a("div",{staticClass:"water-container content-line"},[t._m(1),t._v(" "),a("div",{staticClass:"water-right"},[a("p",{staticClass:"today-drink"},[t._v("今天是： "),a("span",{staticClass:"underline"},[t._v(t._s(t.today.CNtoday))])]),t._v(" "),a("p",{staticClass:"today-drink"},[t._v("今天已经喝了 "),a("span",{staticClass:"underline"},[t._v(t._s(t.totalCupNumber))]),t._v("  杯")]),t._v(" "),a("p",{staticClass:"today-drink"},[t._v("总共 "),a("span",{staticClass:"underline"},[t._v(t._s(t.totalDrinkWater))]),t._v("  ML")]),t._v(" "),a("p",{directives:[{name:"show",rawName:"v-show",value:!t.reachStandard,expression:"!reachStandard"}],staticClass:"today-drink"},[t._v("还差 "),a("span",{staticClass:"hightlight underline"},[t._v(t._s(2e3-t.totalDrinkWater))]),t._v(" ML")]),t._v(" "),a("p",{directives:[{name:"show",rawName:"v-show",value:t.reachStandard,expression:"reachStandard"}],staticClass:"today-drink reach-standard"},[t._v("达标啦！")]),t._v(" "),a("div",[a("button",{staticClass:"add-cup-of-water cup-button",on:{click:t.addOneCupWater}},[t._v("喝一杯")]),t._v(" "),a("button",{staticClass:"sub-cup-of-water cup-button",on:{click:t.subOneCupWater}},[t._v("减一杯")])])])]),t._v(" "),a("el-dialog",{attrs:{title:"设置用户名",visible:t.isSetUserName,"before-close":t.handleUserNameClose,width:"70%"},on:{"update:visible":function(e){t.isSetUserName=e}}},[a("div",{staticClass:"drink-water-user-name content-line"},[a("span",[t._v("请输入你的用户名：")]),t._v(" "),a("el-input",{staticClass:"user-name-content",attrs:{placeholder:"请输入user name","prefix-icon":"el-icon-tickets",size:"mini"},model:{value:t.userName,callback:function(e){t.userName=e},expression:"userName"}})],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.handleUserNameClose}},[t._v("确 定")])],1)]),t._v(" "),a("el-dialog",{attrs:{title:"提示",visible:t.centerDialogVisible,width:"70%",center:""},on:{"update:visible":function(e){t.centerDialogVisible=e}}},[a("span",[t._v("请输入用户名!用户名不能为空！")]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.centerDialogVisible=!1}}},[t._v("确 定")])],1)])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("每天需要喝"),e("span",{staticClass:"hightlight"},[this._v(" 2000ML ")]),this._v("的水")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"img-container"},[e("img",{staticClass:"water-img",attrs:{src:a("dc67"),alt:""}})])}]};var h=a("VU/8")(d,p,!1,function(t){a("ds0B")},null,null).exports;s.default.use(r.a);var m=new r.a({mode:"history",routes:[{path:"/",name:"HomePage",component:c},{path:"/drink-water",name:"DrinkWater",component:h}]}),v=a("zL8q"),_=a.n(v),f=(a("tvR6"),a("mtWM")),C=a.n(f);s.default.config.productionTip=!1,s.default.use(_.a),s.default.prototype.$axios=C.a,new s.default({el:"#app",router:m,components:{App:i},template:"<App/>"})},dc67:function(t,e,a){t.exports=a.p+"static/img/cup1.a5e6ef7.png"},ds0B:function(t,e){},fg9c:function(t,e){},tvR6:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.6d92e286b94873c35b4b.js.map